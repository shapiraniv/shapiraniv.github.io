---
import BaseLayout from '../../layouts/BaseLayout.astro';
import { useTranslations } from '../../i18n/utils';

export function getStaticPaths() {
  return [
    { params: { lang: 'en' } },
    { params: { lang: 'he' } },
  ];
}

const { lang } = Astro.params as { lang: 'en' | 'he' };
const t = useTranslations(lang);
const isRTL = lang === 'he';

const publications = [
  {
    id: 'mosaic-model',
    title: {
      en: 'The MOSAIC Model',
      he: 'מודל מוזאיק'
    },
    authors: 'Niv Shapira & Daniel Schreiber',
    description: {
      en: 'A policy framework for redistributing AI-generated capital windfalls through a Negative Income Tax. The model proposes two low-friction funding channels: Dynamic VAT (indexed to AI deflation) and Ring-fencing (earmarking corporate tax and capital gains above pre-AI trends). Israeli calibration shows these can finance a poverty-ending floor of ~6,750 NIS/month per adult-equivalent, with the capital windfall potentially enabling a Universal High Income.',
      he: 'מסגרת מדיניות לחלוקה מחדש של רווחי הון שנוצרו על ידי בינה מלאכותית באמצעות מס הכנסה שלילי. המודל מציע שני ערוצי מימון: מע"מ דינמי (צמוד לדפלציה של AI) והקצאה ייעודית (מס חברות ורווחי הון מעל מגמות טרום-AI). כיול ישראלי מראה שערוצים אלה יכולים לממן רצפה המסיימת עוני של כ-6,750 ש"ח/חודש למבוגר שקול, כאשר רווחי ההון עשויים לאפשר הכנסה גבוהה אוניברסלית.'
    },
    thumbnail: '/publications/mosaic-model-thumbnail.jpeg',
    pdf: '/publications/mosaic-model.pdf',
    externalLink: 'https://mosaic-ai-policy-institute.github.io/mosaic-model/',
    articleLink: 'https://www.mosaic.org.il/model',
    year: '2026'
  },
  {
    id: 'mosaic-ai-infra',
    title: {
      en: 'AI as National Infrastructure',
      he: 'בינה מלאכותית כתשתית לאומית'
    },
    description: {
      en: 'AI infrastructure is the "arms race of the 21st century." Despite high global AI rankings, Israel ranks low in physical infrastructure, data, and governance layers. This paper proposes investing in sovereign data centers for sensitive needs, forging partnerships with the US, Abraham Accords nations, and Europe for infrastructure access, and supporting energy needs through regional storage and production facilities near data centers.',
      he: 'תשתיות AI הן "מרוץ החימוש של המאה ה-21". למרות דירוגים גבוהים במדדי AI, ישראל מדורגת במקומות נמוכים בתשתית הפיזית, הנתונים והמשילות. המסמך מציע השקעה במרכזי נתונים ריבוניים לצרכים רגישים, יצירת שיתופי פעולה עם ארה"ב, מדינות הסכמי אברהם ואירופה לגישה לתשתיות, ותמיכה אנרגטית באמצעות מתקני אגירה וייצור סמוך למרכזי נתונים.'
    },
    thumbnail: '/publications/mosaic-ai-infra-thumbnail.jpeg',
    pdf: '/publications/mosaic-ai-infra.pdf',
    articleLink: 'https://www.mosaic.org.il/post/%D7%91%D7%99%D7%A0%D7%94-%D7%9E%D7%9C%D7%90%D7%9B%D7%95%D7%AA%D7%99%D7%AA-%D7%9B%D7%AA%D7%A9%D7%AA%D7%99%D7%AA-%D7%9C%D7%90%D7%95%D7%9E%D7%99%D7%AA',
    year: '2025'
  }
];
---

<BaseLayout title={`${t('page.publications')} | Niv Shapira`} lang={lang}>
  <div class="page-header row">
    <h2 class:list={{ 'text-end': isRTL, 'ms-auto': isRTL }}>
      {t('page.publications')}
    </h2>
  </div>
  <div class:list={['page-container', 'publications-list', { 'rtl': isRTL }]}>
    {publications.map((pub) => (
      <article class="publication-item">
        <div class="publication-thumbnail">
          <a href={pub.pdf} target="_blank">
            <img src={pub.thumbnail} alt={pub.title[lang]} class="img-fluid rounded" />
          </a>
        </div>
        <div class:list={['publication-content', { 'text-end': isRTL }]}>
          <h3>{pub.title[lang]}</h3>
          <p class="publication-meta">{pub.year}{pub.authors && ` · ${pub.authors}`}</p>
          <p class="publication-description">{pub.description[lang]}</p>
          <div class="publication-links">
            <a href={pub.pdf} target="_blank" class="btn btn-primary btn-sm">
              {lang === 'en' ? 'Download PDF' : 'הורד PDF'}
            </a>
            {pub.externalLink && (
              <a href={pub.externalLink} target="_blank" class="btn btn-outline-secondary btn-sm">
                {lang === 'en' ? 'Interactive Tool' : 'כלי אינטראקטיבי'}
              </a>
            )}
            <a href={pub.articleLink} target="_blank" class="btn btn-outline-secondary btn-sm">
              {lang === 'en' ? 'Read Article' : 'קרא מאמר'}
            </a>
          </div>
        </div>
      </article>
    ))}
  </div>
</BaseLayout>

<style>
  .publications-list {
    display: flex;
    flex-direction: column;
    gap: 2rem;
  }

  .publication-item {
    display: flex;
    gap: 1.5rem;
    padding-bottom: 2rem;
    border-bottom: 1px solid #eee;
  }


  .publication-thumbnail {
    flex-shrink: 0;
    width: 200px;
  }

  .publication-thumbnail img {
    width: 100%;
    height: auto;
    transition: opacity 0.2s;
  }

  .publication-thumbnail img:hover {
    opacity: 0.8;
  }

  .publication-content {
    flex: 1;
  }

  .publication-content h3 {
    margin-bottom: 0.25rem;
    color: #333;
  }

  .publication-meta {
    color: #666;
    margin-bottom: 0.5rem;
  }

  .publication-description {
    margin-bottom: 1rem;
  }

  .publication-links {
    display: flex;
    gap: 0.5rem;
    flex-wrap: wrap;
  }


  .btn {
    text-decoration: none;
    padding: 0.375rem 0.75rem;
    border-radius: 0.25rem;
    font-size: 0.875rem;
  }

  .btn-primary {
    background-color: #1ca4fc;
    color: white;
    border: 1px solid #1ca4fc;
  }

  .btn-primary:hover {
    background-color: #0e507d;
    border-color: #0e507d;
  }

  .btn-outline-secondary {
    background-color: transparent;
    color: #666;
    border: 1px solid #666;
  }

  .btn-outline-secondary:hover {
    background-color: #666;
    color: white;
  }

  @media (max-width: 576px) {
    .publication-item {
      flex-direction: column;
    }

    .publication-thumbnail {
      width: 100%;
      max-width: 300px;
    }
  }
</style>
